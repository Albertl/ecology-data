---
layout: exercise
title: Basic Python 2
---

Dr. Granger is interested in studying the relationship between the
length of house-elves' ears and aspects of their DNA. This research is
part of a larger project attempting to understand why house-elves
possess such powerful magic. She has obtained DNA samples and ear
measurements from a small group of house-elves to conduct a preliminary
analysis (prior to submitting a grant application to the Ministry of
Magic) and she would like you to conduct the analysis for her (she might
know everything there is to know about magic, but she sure doesn't know
much about computers). She has placed the file on the web for you to
[download]({{ site.baseurl }}/data/houseelf_earlength_dna_data.csv).

You might be able to do this analysis by hand in Excel, but counting all
of those bases would be a lot of work, and besides, Dr. Granger seems to
always get funded, which means that you'll be doing this again soon with a
much larger dataset. So, you decide to write a script so that it will be
easy to do the analysis again.

Write a Python script that:

1.  Imports the data into a data structure of your choice
```{r}
  data <- read.csv('../data/houseelf_earlength_dna_data.csv', header = TRUE, sep = ',')
```

2.  Loops over the rows in the dataset
3.  For each row in the dataset checks to see if the ear length is large
    (>10 cm) or small (<=10 cm) and determines the GC-content of the
    DNA sequence (i.e., the percentage of bases that are either G or C)
4.  Stores this information in a table where the first column has the ID
    for the individual, the second column contains the string 'large' or
    the string 'small' depending on the size of the individuals ears,
    and the third column contains the GC content of the DNA sequence.
    
```{r}
  output_table <- data.frame(ncol = 3, nrow = length(data[,1])) #Task 4
  for (i in 1:length(data[,1])){ #Task 2

    if(data$earlength[i] > 10){ earlength = 'large' } #Task 3
    else{ earlength = 'small' }

    nucleotides = strsplit(as.character(data$dnaseq[i]),"")[[1]] 
        #The dnaseq column imports as a 'factor'. Strsplit returns and object that we simplify with the '[[1]]'.
    GC_pairs = nucleotides[nucleotides == 'G' | nucleotides == 'C'] #subset to G OR C ocurrences.
    GC_content = length(GC_pairs) / length(nucleotides)  

    output_table[i,1] = data$id[i] #Task 4
    output_table[i,2] = earlength
    output_table[i,3] = GC_content
  } #closes for loop from Task 2.
```

5.  Prints the average GC-content for both large-eared elves and
    small-eared elves to the screen.
```{r echo=FALSE}
  large_ears <- output_table[output_table[,2] == 'large',]
  small_ears <- output_table[output_table[,2] == 'small',]

  paste('Large-eared elves have an average GC-content of ', mean(large_ears[,3]), '.')
  paste('Small-eared elves have an average GC-content of ', mean(small_ears[,3]), '.')
```

6.  Exports the table of individual level GC values to a CSV (comma
    delimited text) file titled `grangers_analysis.csv`.
```{r}
  #write.csv(output_table, 'grangers_analysis.csv')
```

This code should use functions to break the code up into manageable
pieces. [NOT SURE IF FUNCTIONS MAKE A LARGE IMPACT HERE. MIGHT SAVE THE NUDGE FOR A FUTURE LESSON]. 

For example, here's a function for importing the data from the
web: ...

This function imports the data as a list of lists. Another good option would be
to use either a Pandas data frame or a Numpy array. [IF NOT THE PREVIOUS EXERCISE, THIS WOULD BE A GOOD PLACE TO INTRODUCE THE DIFFERENT DATA MANAGEMENT CLASSES; list, matrix, data frame.]

Throughout the assignment feel free to use whatever data structures you
prefer. Ask your instructor if you have questions about the best choices.